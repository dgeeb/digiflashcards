import{r as V,a as d,c as u,b as s,w as N,d as S,e as m,v as p,t as c,f,g,h as x,u as R,i as q,o as _,j as v,k as B}from"./index-kXFCKEwh.js";const C={class:"auth-page"},D={class:"auth-card"},P={class:"form-field"},U={class:"form-field"},E={key:0,class:"form-error",role:"alert"},F=["disabled"],M={class:"auth-card__links"},j={__name:"Login",emits:["notify"],setup(T,{emit:y}){const w=y,n=R(),b=q(),{login:h}=B(),o=V({email:"",password:""}),a=d(!1),r=d("");async function k(){if(!a.value){r.value="",a.value=!0;try{await h(o.email,o.password),w("notify","Welcome back! Ready for today's session?");const t=b.query.redirect;typeof t=="string"&&t?n.push(t):n.push({name:"Dashboard"})}catch(t){r.value=(t==null?void 0:t.message)||"Unable to sign in. Please try again."}finally{a.value=!1}}}return(t,e)=>{const l=x("router-link");return _(),u("section",C,[s("article",D,[e[6]||(e[6]=s("header",{class:"auth-card__header"},[s("h1",null,"Welcome back"),s("p",null,"Sign in to see today's spaced repetition session.")],-1)),s("form",{class:"auth-card__form",onSubmit:N(k,["prevent"])},[s("div",P,[e[2]||(e[2]=s("label",{for:"login-email"},"Email",-1)),m(s("input",{id:"login-email","onUpdate:modelValue":e[0]||(e[0]=i=>o.email=i),type:"email",autocomplete:"email",required:""},null,512),[[p,o.email]])]),s("div",U,[e[3]||(e[3]=s("label",{for:"login-password"},"Password",-1)),m(s("input",{id:"login-password","onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),type:"password",autocomplete:"current-password",required:""},null,512),[[p,o.password]])]),r.value?(_(),u("p",E,c(r.value),1)):S("",!0),s("button",{class:"button button--primary",type:"submit",disabled:a.value},c(a.value?"Signing inâ€¦":"Sign in"),9,F)],32),s("div",M,[f(l,{to:{name:"Register"}},{default:g(()=>[...e[4]||(e[4]=[v("Need an account?",-1)])]),_:1}),f(l,{to:{name:"ForgotPassword"}},{default:g(()=>[...e[5]||(e[5]=[v("Forgot password?",-1)])]),_:1})])])])}}};export{j as default};
