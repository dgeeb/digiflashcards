import{r as _,k as V,a as f,c as d,b as s,w as N,d as k,e as o,v as l,l as A,F as C,m as U,n as q,t as m,f as x,g as Q,h,u as D,o as u,j as S}from"./index-kXFCKEwh.js";const B={class:"auth-page"},L={class:"auth-card"},M={class:"form-field"},P={class:"form-field"},E={class:"form-grid"},F={class:"form-field"},R={class:"form-field"},T={class:"form-field"},j=["value"],z={class:"form-field"},G={key:0,class:"form-error",role:"alert"},H=["disabled"],I={class:"auth-card__links"},O={__name:"Register",emits:["notify"],setup(J,{emit:c}){const w=c,g=D(),{register:v,secretQuestions:p}=V(),t=_({displayName:"",email:"",password:"",confirm:"",secretQuestion:p[0],secretAnswer:""}),a=f(!1),i=f("");async function y(){if(!a.value){if(i.value="",t.password!==t.confirm){i.value="Passwords do not match.";return}a.value=!0;try{await v({email:t.email,password:t.password,displayName:t.displayName,secretQuestion:t.secretQuestion,secretAnswer:t.secretAnswer}),w("notify","Account created! Let's craft your first course."),g.push({name:"Dashboard"})}catch(n){i.value=(n==null?void 0:n.message)||"Unable to create the account. Please try again."}finally{a.value=!1}}}return(n,e)=>{const b=h("router-link");return u(),d("section",B,[s("article",L,[e[13]||(e[13]=s("header",{class:"auth-card__header"},[s("h1",null,"Create your study space"),s("p",null,"Design courses, build stages and let spaced repetition guide your learning.")],-1)),s("form",{class:"auth-card__form",onSubmit:N(y,["prevent"])},[s("div",M,[e[6]||(e[6]=s("label",{for:"register-name"},"Display name",-1)),o(s("input",{id:"register-name","onUpdate:modelValue":e[0]||(e[0]=r=>t.displayName=r),type:"text",autocomplete:"name"},null,512),[[l,t.displayName]])]),s("div",P,[e[7]||(e[7]=s("label",{for:"register-email"},"Email",-1)),o(s("input",{id:"register-email","onUpdate:modelValue":e[1]||(e[1]=r=>t.email=r),type:"email",autocomplete:"email",required:""},null,512),[[l,t.email]])]),s("div",E,[s("div",F,[e[8]||(e[8]=s("label",{for:"register-password"},"Password",-1)),o(s("input",{id:"register-password","onUpdate:modelValue":e[2]||(e[2]=r=>t.password=r),type:"password",autocomplete:"new-password",required:""},null,512),[[l,t.password]])]),s("div",R,[e[9]||(e[9]=s("label",{for:"register-confirm"},"Confirm password",-1)),o(s("input",{id:"register-confirm","onUpdate:modelValue":e[3]||(e[3]=r=>t.confirm=r),type:"password",autocomplete:"new-password",required:""},null,512),[[l,t.confirm]])])]),s("div",T,[e[10]||(e[10]=s("label",{for:"register-question"},"Secret question",-1)),o(s("select",{id:"register-question","onUpdate:modelValue":e[4]||(e[4]=r=>t.secretQuestion=r),required:""},[(u(!0),d(C,null,U(q(p),r=>(u(),d("option",{key:r,value:r},m(r),9,j))),128))],512),[[A,t.secretQuestion]])]),s("div",z,[e[11]||(e[11]=s("label",{for:"register-answer"},"Secret answer",-1)),o(s("input",{id:"register-answer","onUpdate:modelValue":e[5]||(e[5]=r=>t.secretAnswer=r),type:"text",required:""},null,512),[[l,t.secretAnswer]])]),i.value?(u(),d("p",G,m(i.value),1)):k("",!0),s("button",{class:"button button--primary",type:"submit",disabled:a.value},m(a.value?"Creating accountâ€¦":"Create account"),9,H)],32),s("div",I,[x(b,{to:{name:"Login"}},{default:Q(()=>[...e[12]||(e[12]=[S("Already have an account?",-1)])]),_:1})])])])}}};export{O as default};
