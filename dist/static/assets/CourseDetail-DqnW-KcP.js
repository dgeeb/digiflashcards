import{r as D,a as I,p as N,i as V,q as A,x as B,c as l,b as t,t as a,w as M,d as v,e as g,v as _,F,m as T,f as U,g as q,h as E,u as R,o as d,j as $,k as j,z}from"./index-kXFCKEwh.js";const L={key:0,class:"course-detail"},O={class:"course-detail__header"},W={class:"course-detail__meta"},G={class:"meta-value"},H={class:"meta-value"},J={class:"course-detail__actions"},K={class:"form-grid"},P={class:"form-field"},Q={class:"form-field"},X={key:0,class:"form-error",role:"alert"},Y={class:"course-detail__stages"},Z={key:0,class:"empty-state"},tt={class:"stage-grid"},et={class:"stage-card__header"},st={class:"stage-card__points"},ot={class:"stage-card__description"},at={class:"stage-card__stats"},it={class:"stage-card__footer"},nt=["onClick"],rt=["onClick"],lt={key:1,class:"dashboard dashboard--empty"},dt={class:"empty-card"},pt={__name:"CourseDetail",emits:["notify"],setup(ut,{emit:f}){const b=f,h=V(),p=R(),{updateCurrentUser:y}=j(),n=D({title:"",description:""}),u=I(""),o=N(()=>{var e,r;const i=h.params.courseId;return(r=(e=A.value)==null?void 0:e.courses.find(c=>c.id===i))!=null?r:null});function S(){n.title="",n.description="",u.value=""}function k(){if(o.value){if(!n.title.trim()){u.value="Stage name is required.";return}y(i=>{const e=i.courses.find(r=>r.id===o.value.id);e&&e.stages.push({id:z(),title:n.title.trim(),description:n.description.trim(),createdAt:new Date().toISOString(),points:0,cards:[],metrics:{total:0,due:0,newCards:0,mastered:0,learning:0}})}),b("notify","Stage created! Add cards to prepare your review session."),S()}}function C(i){p.push({name:"StageSession",params:{courseId:o.value.id,stageId:i.id}})}function w(i){p.push({name:"StageDetail",params:{courseId:o.value.id,stageId:i.id}})}return o.value&&o.value.stages.forEach(i=>B(i)),(i,e)=>{var c;const r=E("router-link");return o.value?(d(),l("section",L,[t("header",O,[t("div",null,[t("h1",null,a(o.value.title),1),t("p",null,a(o.value.description||"Add a description to tell learners what this course is about."),1)]),t("div",W,[t("div",null,[e[2]||(e[2]=t("span",{class:"meta-label"},"Total points",-1)),t("span",G,a((c=o.value.points)!=null?c:0),1)]),t("div",null,[e[3]||(e[3]=t("span",{class:"meta-label"},"Stages",-1)),t("span",H,a(o.value.stages.length),1)])])]),t("section",J,[e[7]||(e[7]=t("h2",null,"Create a stage",-1)),t("form",{class:"inline-form",onSubmit:M(k,["prevent"])},[t("div",K,[t("div",P,[e[4]||(e[4]=t("label",{for:"stage-title"},"Stage name",-1)),g(t("input",{id:"stage-title","onUpdate:modelValue":e[0]||(e[0]=s=>n.title=s),type:"text",required:"",placeholder:"e.g. Stage 1 â€” Basics"},null,512),[[_,n.title]])]),t("div",Q,[e[5]||(e[5]=t("label",{for:"stage-description"},"Description",-1)),g(t("input",{id:"stage-description","onUpdate:modelValue":e[1]||(e[1]=s=>n.description=s),type:"text",placeholder:"What will this stage cover?"},null,512),[[_,n.description]])])]),u.value?(d(),l("p",X,a(u.value),1)):v("",!0),e[6]||(e[6]=t("button",{class:"button button--success",type:"submit"},"Add stage",-1))],32)]),t("section",Y,[e[12]||(e[12]=t("h2",null,"Stages",-1)),o.value.stages.length?v("",!0):(d(),l("p",Z,"No stages yet. Create one above to get started.")),t("div",tt,[(d(!0),l(F,null,T(o.value.stages,s=>{var m;return d(),l("article",{key:s.id,class:"stage-card"},[t("header",et,[t("h3",null,a(s.title),1),t("span",st,a((m=s.points)!=null?m:0)+" pts",1)]),t("p",ot,a(s.description||"No description yet."),1),t("dl",at,[t("div",null,[e[8]||(e[8]=t("dt",null,"Cards",-1)),t("dd",null,a(s.metrics.total),1)]),t("div",null,[e[9]||(e[9]=t("dt",null,"Due",-1)),t("dd",null,a(s.metrics.due),1)]),t("div",null,[e[10]||(e[10]=t("dt",null,"New",-1)),t("dd",null,a(s.metrics.newCards),1)]),t("div",null,[e[11]||(e[11]=t("dt",null,"Mastered",-1)),t("dd",null,a(s.metrics.mastered),1)])]),t("footer",it,[t("button",{class:"button button--ghost",type:"button",onClick:x=>C(s)},"Start session",8,nt),t("button",{class:"button button--primary",type:"button",onClick:x=>w(s)},"Manage cards",8,rt)])])}),128))])])])):(d(),l("section",lt,[t("div",dt,[e[14]||(e[14]=t("h1",null,"Course not found",-1)),e[15]||(e[15]=t("p",null,"The course you are looking for does not exist anymore.",-1)),U(r,{class:"button button--primary",to:{name:"Dashboard"}},{default:q(()=>[...e[13]||(e[13]=[$("Back to dashboard",-1)])]),_:1})])]))}}};export{pt as default};
